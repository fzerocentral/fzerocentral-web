<h1>{{model.filterGroup.name}} (filter group)</h1>

<div>Kind: {{model.filterGroup.kind}}</div>

<div>Description: {{model.filterGroup.description}}</div>

<div>
  Used by these chart types:
  <ul class="chart-type-list plain-bullet-list">
    {{#each model.chartTypes as |chartType|}}
      <li>
        {{#link-to "chart-types.filter-groups" chartType.id}}
          {{chartType.name}}
        {{/link-to}}
      </li>
    {{/each}}
  </ul>
</div>

<hr>

<div class="filter-section">
  <div class="filter-list">
    Choosable Filters:
    <ul class="choosable-filter-list plain-bullet-list">
      {{#each model.choosableFilters as |filter|}}
        <li>
          <button type="button" class="show-filter-detail-button" {{action (mut selectedFilterId) filter.id}}> {{filter.name}} </button>
        </li>
      {{/each}}
    </ul>
  </div>

  {{#if (eq model.filterGroup.kind "select")}}
    <div class="filter-list">
      Implied Filters:
      <ul class="implied-filter-list plain-bullet-list">
        {{#each model.impliedFilters as |filter|}}
          <li>
            <button type="button" class="show-filter-detail-button" {{action (mut selectedFilterId) filter.id}}> {{filter.name}} </button>
          </li>
        {{/each}}
      </ul>
    </div>
  {{/if}}

  <div class="filter-detail-section">
    {{#if selectedFilterId}}
      {{filter-detail
        filterId=selectedFilterId
        allFilters=model.filters}}
    {{/if}}
  </div>
</div>

<div class="filter-create-form">
  <h3>New filter</h3>

  <div>
    <label>Name</label>
    {{input type="text" name="name" value=model.newFilter.name}}
  </div>

  {{#if (eq model.filterGroup.kind "select")}}
    <div class="type-field">
      <label>Type</label>
      {{#power-select
        options=usageTypeOptions
        selected=model.newFilter.usageType
        onchange=(action (mut model.newFilter.usageType))
        placeholder="Not selected"
        as |option|}}
        {{option}}
      {{/power-select}}
    </div>
  {{/if}}

  {{#if (eq model.filterGroup.kind "numeric")}}
    <div>
      <label>Numeric value</label>
      {{input type="number" name="numeric-value" value=model.newFilter.numericValue}}
    </div>
  {{/if}}

  <div class="error-message">{{error-display filterCreateError}}</div>

  <div>
    <button type="button" class="create-button" {{action "createFilter"}}> Create filter </button>
  </div>
</div>
